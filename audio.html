<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
    <title>web.dev</title>
    <meta name="robots" content="noindex">
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="iframe" content="standalone">
    
    
    <script async="" src="https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/web/js/app_loader.js"></script><script nonce="Yn5ce4QiQUBzAInXg5Uq2wr++1Chlb">
      (function(){
        window.framebox=window.framebox||function(){(window.framebox.q=window.framebox.q||[]).push(arguments)};
        
        var a={},b=function(){(window.framebox.dq=window.framebox.dq||[]).push(arguments)};
        ['getUrl','handleLinkClicksInParent','initAutoSize','navigate','pushState','replaceState',
         'requestQueryAndFragment','sendEvent','updateSize','scrollParentWindow']
          .forEach(function(x){a[x]=function(){b(x,arguments)}});
        window.devsite={framebox:{AutoSizeClient:a}};
      })();
      
      (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
        t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
        E.parentNode.insertBefore(t,E);})(window, document, 'script',
        'https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/web/js/app_loader.js', '[27,"en",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be","https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/web","https://web-dot-devsite-v2-prod-3p.appspot.com",null,1,null,1,null,[1,6,8,12,14,17,21,25,50,52,63,70,75,76,80,87,91,92,93,97,98,100,101,102,103,104,105,107,108,109,110,112,113,116,117,118,120,122,124,125,126,127,129,130,131,132,133,134,135,136,138,140,141,147,148,149,150,151,152,155,156,157,158,159,161,163,164,168,169,170,172,179,180,182,183,186,190,191,193,196],"AIzaSyCNm9YxQumEXwGJgTDjxoxXK6m1F-9720Q","AIzaSyCc76DZePGtoyUjqKrLdsMGk_ry7sljLbY","web.dev","AIzaSyB9bqgQ2t11WJsOX8qNsCQ6U-w91mmqF-I","AIzaSyAdYnStPdzjcJJtQ0mvIaeaMKj7_t6J_Fg",null,null,null,["Profiles__enable_profile_communities","OpenInReplit__enable_replit","OnSwitch__enable","Badges__enable_drag_and_drop_badges","Search__enable_dynamic_content_confidential_banner","Cloud__enable_cloud_shell","Analytics__enable_cookie_bar","Cloud__enable_cloud_dlp_service","Cloud__enable_cloudx_ping","Cloud__enable_cloudx_experiment_ids","Profiles__enable_profile_collections","Badges__enable_hide_badges","Cloud__enable_cloud_facet_chat","BookNav__enable_tenant_cache_key","Cloud__enable_cloud_shell_fte_user_flow","Experiments__reqs_query_experiments","BookNav__enable_book_nav_filtering","Search__enable_faceted_search","MiscFeatureFlags__enable_project_variables","Profiles__enable_awarding_url","Cloud__enable_free_trial_server_call","Significatio__enable_experiment_id_caching","MiscFeatureFlags__enable_firebase_utm","Search__enable_page_map","Profiles__enable_inferred_interests","ContentExcellence__enable_verified_date","Profiles__enable_public_developer_profiles","MiscFeatureFlags__developers_footer_image","MiscFeatureFlags__enable_keyword_inheritance","AuthorPageInsights__enable_author_page_insights","Profiles__require_profile_eligibility_for_signin","MiscFeatureFlags__enable_explain_this_code","Profiles__enable_profile_notifications_ui","BookNav__enable_collapsible_book_nav","Search__enable_suggestions_from_borg","Profiles__enable_release_notes_notifications","Profiles__enable_page_saving","ContentExcellence__enable_googler_button","Profiles__enable_developer_profiles_callout","MiscFeatureFlags__developers_footer_dark_image","Profiles__enable_developer_profiles_dashboard_recommendations","Concierge__enable_pushui"],null,null,"AIzaSyA58TaKli1DculwmAmbpzLVGuWc8eCQgQc","https://developerscontentserving-pa.googleapis.com","AIzaSyDWBU60w0P9hEkr29kkksYs8Z7gvZ8u_wc","https://developerscontentsearch-pa.googleapis.com",2]')
      
      </script>
    
  <script src="https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/js/devsite_app_module.js" nonce="Yn5ce4QiQUBzAInXg5Uq2wr++1Chlb"></script><script src="https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/js/devsite_app_custom_elements_module.js" nonce="Yn5ce4QiQUBzAInXg5Uq2wr++1Chlb"></script><script src="https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/js/devsite_devsite_code_module.js" nonce="Yn5ce4QiQUBzAInXg5Uq2wr++1Chlb"></script><script src="https://www.gstatic.com/devrel-devsite/prod/v2df3c70ff8eb01e8c0bb049c3da894e4221ea678ae827e9fb45267d1a61dc2be/js/devsite_devsite_snackbar_module.js" nonce="Yn5ce4QiQUBzAInXg5Uq2wr++1Chlb"></script></head>
  
  <body ready="" style="--devsite-panel-height: 0px;">
    


  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéôÔ∏è</text></svg>">
    <title>How to record audio from the user's microphone</title>
    <style>
      :root {
        color-scheme: dark light;
      }
      html {
        box-sizing: border-box;
      }
      *,
      *:before,
      *:after {
        box-sizing: inherit;
      }
      body {
        margin: 1rem;
        font-family: system-ui, sans-serif;
      }
      button {
        display: block;
        margin-bottom: 4px;
      }
      pre {
        color: red;
        white-space: pre-line;
      }
    </style>
  
  
    <h1 id="how-to-record-audio-from-the-users-microphone" data-text="How to record audio from the user's microphone" tabindex="-1">How to record audio from the user's microphone</h1>
    <button id="startMicrophoneButton">Start using microphone</button>
    <button id="stopMicrophoneButton" disabled="">Stop using microphone</button>
    <button id="startRecordButton" disabled="">Start recording</button>
    <button id="stopRecordButton" disabled="">Stop recording</button>
    <devsite-code no-copy="" data-copy-event-label="" dark-code=""><div class="devsite-code-buttons-container" role="group" aria-label="Action buttons"><button type="button" class="gc-analytics-event material-icons devsite-icon-code-dark devsite-toggle-dark" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" aria-label="Dark code theme" data-title="Dark code theme"></button><button type="button" class="gc-analytics-event material-icons devsite-icon-code-light devsite-toggle-light" data-category="Site-Wide Custom Events" data-label="Light Code Toggle" track-type="exampleCode" track-name="lightCodeToggle" aria-label="Light code theme" data-title="Light code theme"></button></div><pre id="logs" translate="no" dir="ltr" is-upgraded=""></pre></devsite-code>
    
    <script>
      const startMicrophoneButton = document.querySelector('#startMicrophoneButton');
      const stopMicrophoneButton = document.querySelector('#stopMicrophoneButton');
      const startRecordButton = document.querySelector('#startRecordButton');
      const stopRecordButton = document.querySelector('#stopRecordButton');

      let stream;
      let recorder;

      startMicrophoneButton.addEventListener("click", async () => {
        // Prompt the user to use their microphone.
        stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        recorder = new MediaRecorder(stream);

        stopMicrophoneButton.disabled = false;
        startRecordButton.disabled = false;
        log("Your microphone audio is being used.");
      });

      stopMicrophoneButton.addEventListener("click", () => {
        // Stop the stream.
        stream.getTracks().forEach(track => track.stop());

        startRecordButton.disabled = true;
        stopRecordButton.disabled = true;
        log("Your microphone audio is not used anymore.");
      });

      startRecordButton.addEventListener("click", async () => {
        // Prompt the user to choose where to save the recording file.
        const suggestedName = "microphone-recording.webm";
        const handle = await window.showSaveFilePicker({ suggestedName });
        const writable = await handle.createWritable();

        // Start recording.
        recorder.start();
        recorder.addEventListener("dataavailable", async (event) => {
          // Write chunks to the file.
          await writable.write(event.data);
          if (recorder.state === "inactive") {
            // Close the file when the recording stops.
            await writable.close();
          }
        });

        stopRecordButton.disabled = false;
        log("Your microphone audio is being recorded locally.");
      });

      stopRecordButton.addEventListener("click", () => {
        // Stop the recording.
        recorder.stop();

        stopRecordButton.disabled = true;
        log("Your microphone audio has been successfully recorded locally.");
      });

      /* Utils */

      function log(text) {
        document.querySelector('#logs').textContent += `${text}\r\n`;
      }

      window.onunhandledrejection = (event) => {
        log(`> ${event.reason}`);
      };
      window.onerror = (error) => {
        log(`> ${error}`);
      };
    </script>
  


  
</body></html>